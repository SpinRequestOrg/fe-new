import{_ as R}from"./DVx_XNg2.js";import{_ as w,F as S}from"./BMpKgzc5.js";import{h as b,f as k,r as C,k as B,m as N,o as f,c as E,b as n,a as i,w as _,n as e,s as x,q as P,_ as F,p as $,L as q,v as I,t as T}from"./C9o7SX3v.js";import{R as V}from"./CYofN6sT.js";import"./CEjNp6Up.js";import"./PSdzrU7u.js";import"./Cpj98o6Y.js";const z={class:"container pt-8"},A={class:"max-w-[90%] mx-auto w-[400px]"},H=b({__name:"reset-password",setup(D){var m,c;const{$repo:{auth:g}}=k(),a=C(!1),t=B(),d=(m=t==null?void 0:t.query)==null?void 0:m.token,h=decodeURIComponent((c=t==null?void 0:t.query)==null?void 0:c.email),v=async({password:p,password_confirmation:o})=>{var r,u;try{const s={password:p,password_confirmation:o,token:d,email:h};a.value=!0;const l=await g.resetPassword(s),y=l==null?void 0:l.message;x({title:"Success",description:y,variant:"normal"}),P().push("/login"),a.value=!1}catch(s){a.value=!1,x({title:"Failed",description:((r=s==null?void 0:s.data)==null?void 0:r.message)??"Failed to send reset link",variant:"warning"}),console.error("ERROR RESETTING PASSWORD",(u=s==null?void 0:s.data)==null?void 0:u.message)}};return N({title:"Input New Password"}),(p,o)=>{const r=R;return f(),E("div",z,[n(r,{to:"/login"}),o[0]||(o[0]=i("div",{class:"text-4xl lg:text-5xl font-semibold my-4 text-center max-w-[595px] mx-auto"}," Change password ",-1)),o[1]||(o[1]=i("div",{class:"text-muted-foreground text-center mb-6"}," Create a new password ",-1)),i("div",A,[n(e(S),{"validation-schema":e(V),onSubmit:v,class:"space-y-8"},{default:_(()=>[n(w,{type:"password",name:"password",placeholder:"Enter your new password",label:"Set new password"}),n(w,{type:"password",name:"password_confirmation",placeholder:"Confirm password",label:"Confirm password"}),n(F,{class:"w-full flex mt-6",size:"lg",disabled:e(a)||!e(d)},{default:_(()=>[e(a)?(f(),$(e(q),{key:0,class:"size-4 animate-spin mr-2"})):I("",!0),i("span",null,T(e(a)?"Please wait":"Reset password"),1)]),_:1},8,["disabled"])]),_:1},8,["validation-schema"])])])}}});export{H as default};
