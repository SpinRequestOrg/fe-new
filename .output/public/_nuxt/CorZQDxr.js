import{j as C,aC as r,bb as O,aD as _,bc as k,Q as q,f as F}from"./C9o7SX3v.js";function T(o,a,c){const[e={},u]=typeof a=="string"?[{},a]:[a,c],t=C(()=>r(o)),n=e.key||O([u,typeof t.value=="string"?t.value:"",...L(e)]);if(!n||typeof n!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+n);if(!o)throw new Error("[nuxt] [useFetch] request is missing.");const i=n===u?"$f"+n:n;if(!e.baseURL&&typeof t.value=="string"&&t.value[0]==="/"&&t.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:b,lazy:d,default:y,transform:w,pick:g,watch:h,immediate:v,getCachedData:D,deep:E,dedupe:$,...x}=e,p=_({...k,...x,cache:typeof e.cache=="boolean"?void 0:e.cache}),A={server:b,lazy:d,default:y,transform:w,pick:g,immediate:v,getCachedData:D,deep:E,dedupe:$,watch:h===!1?[]:[p,t,...h||[]]};let s;return q(i,()=>{var m;(m=s==null?void 0:s.abort)==null||m.call(s,new DOMException("Request aborted as another request to the same endpoint was initiated.","AbortError")),s=typeof AbortController<"u"?new AbortController:{};const l=r(e.timeout);let f;return l&&(f=setTimeout(()=>s.abort(new DOMException("Request aborted due to timeout.","AbortError")),l),s.signal.onabort=()=>clearTimeout(f)),(e.$fetch||globalThis.$fetch)(t.value,{signal:s.signal,...p}).finally(()=>{clearTimeout(f)})},A)}function L(o){var c;const a=[((c=r(o.method))==null?void 0:c.toUpperCase())||"GET",r(o.baseURL)];for(const e of[o.params||o.query]){const u=r(e);if(!u)continue;const t={};for(const[n,i]of Object.entries(u))t[r(n)]=r(i);a.push(t)}return a}const M=(o,a={})=>T(o,{...a,$fetch:F().$api},"$sC22i8rhLA");export{M as u};
