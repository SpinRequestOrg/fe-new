import{_ as rr}from"./DVx_XNg2.js";import{_ as tr}from"./C9t2BaYq.js";import{_ as nr,C as ar}from"./StAb9ggg.js";import{_ as ir}from"./Cpev-P7o.js";import{_ as sr}from"./MD9yZO5Y.js";import{e as or,h as ue,r as j,f as ur,j as te,o as O,c as fe,a as d,G as K,n as p,H as V,b,t as S,z as fr,w as D,p as F,ak as lr,L as dr,al as cr,s as ve,_ as pr,E as gr,F as _r,m as hr}from"./C9o7SX3v.js";import{_ as yr}from"./DNsd-lev.js";import{u as vr,s as mr}from"./De8_zekx.js";import{_ as br,D as wr}from"./B-MmIPx1.js";import{C as Tr}from"./DSaGwqIE.js";import{p as Ar}from"./BgH6YnCR.js";import{u as $r}from"./CorZQDxr.js";import{S as X,i as le,a as de,b as q,r as R,c as G,f as Or}from"./QHn3D8cw.js";import"./CEjNp6Up.js";import"./Cpj98o6Y.js";import"./v0S0JiXo.js";import"./Dje6iUjb.js";import"./DCm8kJdJ.js";import"./U04HOykY.js";/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=or("RefreshCcwIcon",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);function xr(e,r){for(var t=-1,n=e==null?0:e.length,i=Array(n);++t<n;)i[t]=r(e[t],t,e);return i}var P=Array.isArray,Er=1/0,me=X?X.prototype:void 0,be=me?me.toString:void 0;function Be(e){if(typeof e=="string")return e;if(P(e))return xr(e,Be)+"";if(le(e))return be?be.call(e):"";var r=e+"";return r=="0"&&1/e==-Er?"-0":r}function Cr(e){return e}var Sr="[object AsyncFunction]",Ir="[object Function]",Rr="[object GeneratorFunction]",Mr="[object Proxy]";function Ge(e){if(!de(e))return!1;var r=q(e);return r==Ir||r==Rr||r==Sr||r==Mr}var k=R["__core-js_shared__"],we=function(){var e=/[^.]+$/.exec(k&&k.keys&&k.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Dr(e){return!!we&&we in e}var Fr=Function.prototype,Nr=Fr.toString;function L(e){if(e!=null){try{return Nr.call(e)}catch{}try{return e+""}catch{}}return""}var Lr=/[\\^$.*+?()[\]{}|]/g,zr=/^\[object .+?Constructor\]$/,jr=Function.prototype,Br=Object.prototype,Gr=jr.toString,Hr=Br.hasOwnProperty,Ur=RegExp("^"+Gr.call(Hr).replace(Lr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function qr(e){if(!de(e)||Dr(e))return!1;var r=Ge(e)?Ur:zr;return r.test(L(e))}function Kr(e,r){return e==null?void 0:e[r]}function z(e,r){var t=Kr(e,r);return qr(t)?t:void 0}var ne=z(R,"WeakMap"),Te=function(){try{var e=z(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Yr=9007199254740991,Xr=/^(?:0|[1-9]\d*)$/;function He(e,r){var t=typeof e;return r=r??Yr,!!r&&(t=="number"||t!="symbol"&&Xr.test(e))&&e>-1&&e%1==0&&e<r}function Zr(e,r,t){r=="__proto__"&&Te?Te(e,r,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[r]=t}function Ue(e,r){return e===r||e!==e&&r!==r}var Jr=9007199254740991;function ce(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Jr}function qe(e){return e!=null&&ce(e.length)&&!Ge(e)}var Wr=Object.prototype;function Qr(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||Wr;return e===t}function Vr(e,r){for(var t=-1,n=Array(e);++t<e;)n[t]=r(t);return n}var kr="[object Arguments]";function Ae(e){return G(e)&&q(e)==kr}var Ke=Object.prototype,et=Ke.hasOwnProperty,rt=Ke.propertyIsEnumerable,Ye=Ae(function(){return arguments}())?Ae:function(e){return G(e)&&et.call(e,"callee")&&!rt.call(e,"callee")};function tt(){return!1}var Xe=typeof exports=="object"&&exports&&!exports.nodeType&&exports,$e=Xe&&typeof module=="object"&&module&&!module.nodeType&&module,nt=$e&&$e.exports===Xe,Oe=nt?R.Buffer:void 0,at=Oe?Oe.isBuffer:void 0,ae=at||tt,it="[object Arguments]",st="[object Array]",ot="[object Boolean]",ut="[object Date]",ft="[object Error]",lt="[object Function]",dt="[object Map]",ct="[object Number]",pt="[object Object]",gt="[object RegExp]",_t="[object Set]",ht="[object String]",yt="[object WeakMap]",vt="[object ArrayBuffer]",mt="[object DataView]",bt="[object Float32Array]",wt="[object Float64Array]",Tt="[object Int8Array]",At="[object Int16Array]",$t="[object Int32Array]",Ot="[object Uint8Array]",Pt="[object Uint8ClampedArray]",xt="[object Uint16Array]",Et="[object Uint32Array]",c={};c[bt]=c[wt]=c[Tt]=c[At]=c[$t]=c[Ot]=c[Pt]=c[xt]=c[Et]=!0;c[it]=c[st]=c[vt]=c[ot]=c[mt]=c[ut]=c[ft]=c[lt]=c[dt]=c[ct]=c[pt]=c[gt]=c[_t]=c[ht]=c[yt]=!1;function Ct(e){return G(e)&&ce(e.length)&&!!c[q(e)]}function St(e){return function(r){return e(r)}}var Ze=typeof exports=="object"&&exports&&!exports.nodeType&&exports,B=Ze&&typeof module=="object"&&module&&!module.nodeType&&module,It=B&&B.exports===Ze,ee=It&&Or.process,Pe=function(){try{var e=B&&B.require&&B.require("util").types;return e||ee&&ee.binding&&ee.binding("util")}catch{}}(),xe=Pe&&Pe.isTypedArray,Je=xe?St(xe):Ct,Rt=Object.prototype,Mt=Rt.hasOwnProperty;function Dt(e,r){var t=P(e),n=!t&&Ye(e),i=!t&&!n&&ae(e),a=!t&&!n&&!i&&Je(e),s=t||n||i||a,l=s?Vr(e.length,String):[],u=l.length;for(var f in e)Mt.call(e,f)&&!(s&&(f=="length"||i&&(f=="offset"||f=="parent")||a&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||He(f,u)))&&l.push(f);return l}function Ft(e,r){return function(t){return e(r(t))}}var Nt=Ft(Object.keys,Object),Lt=Object.prototype,zt=Lt.hasOwnProperty;function jt(e){if(!Qr(e))return Nt(e);var r=[];for(var t in Object(e))zt.call(e,t)&&t!="constructor"&&r.push(t);return r}function pe(e){return qe(e)?Dt(e):jt(e)}var Bt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Gt=/^\w*$/;function ge(e,r){if(P(e))return!1;var t=typeof e;return t=="number"||t=="symbol"||t=="boolean"||e==null||le(e)?!0:Gt.test(e)||!Bt.test(e)||r!=null&&e in Object(r)}var H=z(Object,"create");function Ht(){this.__data__=H?H(null):{},this.size=0}function Ut(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}var qt="__lodash_hash_undefined__",Kt=Object.prototype,Yt=Kt.hasOwnProperty;function Xt(e){var r=this.__data__;if(H){var t=r[e];return t===qt?void 0:t}return Yt.call(r,e)?r[e]:void 0}var Zt=Object.prototype,Jt=Zt.hasOwnProperty;function Wt(e){var r=this.__data__;return H?r[e]!==void 0:Jt.call(r,e)}var Qt="__lodash_hash_undefined__";function Vt(e,r){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=H&&r===void 0?Qt:r,this}function N(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}N.prototype.clear=Ht;N.prototype.delete=Ut;N.prototype.get=Xt;N.prototype.has=Wt;N.prototype.set=Vt;function kt(){this.__data__=[],this.size=0}function J(e,r){for(var t=e.length;t--;)if(Ue(e[t][0],r))return t;return-1}var en=Array.prototype,rn=en.splice;function tn(e){var r=this.__data__,t=J(r,e);if(t<0)return!1;var n=r.length-1;return t==n?r.pop():rn.call(r,t,1),--this.size,!0}function nn(e){var r=this.__data__,t=J(r,e);return t<0?void 0:r[t][1]}function an(e){return J(this.__data__,e)>-1}function sn(e,r){var t=this.__data__,n=J(t,e);return n<0?(++this.size,t.push([e,r])):t[n][1]=r,this}function E(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}E.prototype.clear=kt;E.prototype.delete=tn;E.prototype.get=nn;E.prototype.has=an;E.prototype.set=sn;var U=z(R,"Map");function on(){this.size=0,this.__data__={hash:new N,map:new(U||E),string:new N}}function un(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}function W(e,r){var t=e.__data__;return un(r)?t[typeof r=="string"?"string":"hash"]:t.map}function fn(e){var r=W(this,e).delete(e);return this.size-=r?1:0,r}function ln(e){return W(this,e).get(e)}function dn(e){return W(this,e).has(e)}function cn(e,r){var t=W(this,e),n=t.size;return t.set(e,r),this.size+=t.size==n?0:1,this}function C(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}C.prototype.clear=on;C.prototype.delete=fn;C.prototype.get=ln;C.prototype.has=dn;C.prototype.set=cn;var pn="Expected a function";function _e(e,r){if(typeof e!="function"||r!=null&&typeof r!="function")throw new TypeError(pn);var t=function(){var n=arguments,i=r?r.apply(this,n):n[0],a=t.cache;if(a.has(i))return a.get(i);var s=e.apply(this,n);return t.cache=a.set(i,s)||a,s};return t.cache=new(_e.Cache||C),t}_e.Cache=C;var gn=500;function _n(e){var r=_e(e,function(n){return t.size===gn&&t.clear(),n}),t=r.cache;return r}var hn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,yn=/\\(\\)?/g,vn=_n(function(e){var r=[];return e.charCodeAt(0)===46&&r.push(""),e.replace(hn,function(t,n,i,a){r.push(i?a.replace(yn,"$1"):n||t)}),r});function mn(e){return e==null?"":Be(e)}function We(e,r){return P(e)?e:ge(e,r)?[e]:vn(mn(e))}var bn=1/0;function Q(e){if(typeof e=="string"||le(e))return e;var r=e+"";return r=="0"&&1/e==-bn?"-0":r}function Qe(e,r){r=We(r,e);for(var t=0,n=r.length;e!=null&&t<n;)e=e[Q(r[t++])];return t&&t==n?e:void 0}function wn(e,r,t){var n=e==null?void 0:Qe(e,r);return n===void 0?t:n}function Tn(e,r){for(var t=-1,n=r.length,i=e.length;++t<n;)e[i+t]=r[t];return e}function An(){this.__data__=new E,this.size=0}function $n(e){var r=this.__data__,t=r.delete(e);return this.size=r.size,t}function On(e){return this.__data__.get(e)}function Pn(e){return this.__data__.has(e)}var xn=200;function En(e,r){var t=this.__data__;if(t instanceof E){var n=t.__data__;if(!U||n.length<xn-1)return n.push([e,r]),this.size=++t.size,this;t=this.__data__=new C(n)}return t.set(e,r),this.size=t.size,this}function x(e){var r=this.__data__=new E(e);this.size=r.size}x.prototype.clear=An;x.prototype.delete=$n;x.prototype.get=On;x.prototype.has=Pn;x.prototype.set=En;function Cn(e,r){for(var t=-1,n=e==null?0:e.length,i=0,a=[];++t<n;){var s=e[t];r(s,t,e)&&(a[i++]=s)}return a}function Sn(){return[]}var In=Object.prototype,Rn=In.propertyIsEnumerable,Ee=Object.getOwnPropertySymbols,Mn=Ee?function(e){return e==null?[]:(e=Object(e),Cn(Ee(e),function(r){return Rn.call(e,r)}))}:Sn;function Dn(e,r,t){var n=r(e);return P(e)?n:Tn(n,t(e))}function Ce(e){return Dn(e,pe,Mn)}var ie=z(R,"DataView"),se=z(R,"Promise"),oe=z(R,"Set"),Se="[object Map]",Fn="[object Object]",Ie="[object Promise]",Re="[object Set]",Me="[object WeakMap]",De="[object DataView]",Nn=L(ie),Ln=L(U),zn=L(se),jn=L(oe),Bn=L(ne),I=q;(ie&&I(new ie(new ArrayBuffer(1)))!=De||U&&I(new U)!=Se||se&&I(se.resolve())!=Ie||oe&&I(new oe)!=Re||ne&&I(new ne)!=Me)&&(I=function(e){var r=q(e),t=r==Fn?e.constructor:void 0,n=t?L(t):"";if(n)switch(n){case Nn:return De;case Ln:return Se;case zn:return Ie;case jn:return Re;case Bn:return Me}return r});var Fe=R.Uint8Array,Gn="__lodash_hash_undefined__";function Hn(e){return this.__data__.set(e,Gn),this}function Un(e){return this.__data__.has(e)}function Z(e){var r=-1,t=e==null?0:e.length;for(this.__data__=new C;++r<t;)this.add(e[r])}Z.prototype.add=Z.prototype.push=Hn;Z.prototype.has=Un;function qn(e,r){for(var t=-1,n=e==null?0:e.length;++t<n;)if(r(e[t],t,e))return!0;return!1}function Kn(e,r){return e.has(r)}var Yn=1,Xn=2;function Ve(e,r,t,n,i,a){var s=t&Yn,l=e.length,u=r.length;if(l!=u&&!(s&&u>l))return!1;var f=a.get(e),v=a.get(r);if(f&&v)return f==r&&v==e;var h=-1,g=!0,w=t&Xn?new Z:void 0;for(a.set(e,r),a.set(r,e);++h<l;){var m=e[h],y=r[h];if(n)var A=s?n(y,m,h,r,e,a):n(m,y,h,e,r,a);if(A!==void 0){if(A)continue;g=!1;break}if(w){if(!qn(r,function(o,_){if(!Kn(w,_)&&(m===o||i(m,o,t,n,a)))return w.push(_)})){g=!1;break}}else if(!(m===y||i(m,y,t,n,a))){g=!1;break}}return a.delete(e),a.delete(r),g}function Zn(e){var r=-1,t=Array(e.size);return e.forEach(function(n,i){t[++r]=[i,n]}),t}function Jn(e){var r=-1,t=Array(e.size);return e.forEach(function(n){t[++r]=n}),t}var Wn=1,Qn=2,Vn="[object Boolean]",kn="[object Date]",ea="[object Error]",ra="[object Map]",ta="[object Number]",na="[object RegExp]",aa="[object Set]",ia="[object String]",sa="[object Symbol]",oa="[object ArrayBuffer]",ua="[object DataView]",Ne=X?X.prototype:void 0,re=Ne?Ne.valueOf:void 0;function fa(e,r,t,n,i,a,s){switch(t){case ua:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case oa:return!(e.byteLength!=r.byteLength||!a(new Fe(e),new Fe(r)));case Vn:case kn:case ta:return Ue(+e,+r);case ea:return e.name==r.name&&e.message==r.message;case na:case ia:return e==r+"";case ra:var l=Zn;case aa:var u=n&Wn;if(l||(l=Jn),e.size!=r.size&&!u)return!1;var f=s.get(e);if(f)return f==r;n|=Qn,s.set(e,r);var v=Ve(l(e),l(r),n,i,a,s);return s.delete(e),v;case sa:if(re)return re.call(e)==re.call(r)}return!1}var la=1,da=Object.prototype,ca=da.hasOwnProperty;function pa(e,r,t,n,i,a){var s=t&la,l=Ce(e),u=l.length,f=Ce(r),v=f.length;if(u!=v&&!s)return!1;for(var h=u;h--;){var g=l[h];if(!(s?g in r:ca.call(r,g)))return!1}var w=a.get(e),m=a.get(r);if(w&&m)return w==r&&m==e;var y=!0;a.set(e,r),a.set(r,e);for(var A=s;++h<u;){g=l[h];var o=e[g],_=r[g];if(n)var $=s?n(_,o,g,r,e,a):n(o,_,g,e,r,a);if(!($===void 0?o===_||i(o,_,t,n,a):$)){y=!1;break}A||(A=g=="constructor")}if(y&&!A){var T=e.constructor,M=r.constructor;T!=M&&"constructor"in e&&"constructor"in r&&!(typeof T=="function"&&T instanceof T&&typeof M=="function"&&M instanceof M)&&(y=!1)}return a.delete(e),a.delete(r),y}var ga=1,Le="[object Arguments]",ze="[object Array]",Y="[object Object]",_a=Object.prototype,je=_a.hasOwnProperty;function ha(e,r,t,n,i,a){var s=P(e),l=P(r),u=s?ze:I(e),f=l?ze:I(r);u=u==Le?Y:u,f=f==Le?Y:f;var v=u==Y,h=f==Y,g=u==f;if(g&&ae(e)){if(!ae(r))return!1;s=!0,v=!1}if(g&&!v)return a||(a=new x),s||Je(e)?Ve(e,r,t,n,i,a):fa(e,r,u,t,n,i,a);if(!(t&ga)){var w=v&&je.call(e,"__wrapped__"),m=h&&je.call(r,"__wrapped__");if(w||m){var y=w?e.value():e,A=m?r.value():r;return a||(a=new x),i(y,A,t,n,a)}}return g?(a||(a=new x),pa(e,r,t,n,i,a)):!1}function he(e,r,t,n,i){return e===r?!0:e==null||r==null||!G(e)&&!G(r)?e!==e&&r!==r:ha(e,r,t,n,he,i)}var ya=1,va=2;function ma(e,r,t,n){var i=t.length,a=i;if(e==null)return!a;for(e=Object(e);i--;){var s=t[i];if(s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){s=t[i];var l=s[0],u=e[l],f=s[1];if(s[2]){if(u===void 0&&!(l in e))return!1}else{var v=new x,h;if(!(h===void 0?he(f,u,ya|va,n,v):h))return!1}}return!0}function ke(e){return e===e&&!de(e)}function ba(e){for(var r=pe(e),t=r.length;t--;){var n=r[t],i=e[n];r[t]=[n,i,ke(i)]}return r}function er(e,r){return function(t){return t==null?!1:t[e]===r&&(r!==void 0||e in Object(t))}}function wa(e){var r=ba(e);return r.length==1&&r[0][2]?er(r[0][0],r[0][1]):function(t){return t===e||ma(t,e,r)}}function Ta(e,r){return e!=null&&r in Object(e)}function Aa(e,r,t){r=We(r,e);for(var n=-1,i=r.length,a=!1;++n<i;){var s=Q(r[n]);if(!(a=e!=null&&t(e,s)))break;e=e[s]}return a||++n!=i?a:(i=e==null?0:e.length,!!i&&ce(i)&&He(s,i)&&(P(e)||Ye(e)))}function $a(e,r){return e!=null&&Aa(e,r,Ta)}var Oa=1,Pa=2;function xa(e,r){return ge(e)&&ke(r)?er(Q(e),r):function(t){var n=wn(t,e);return n===void 0&&n===r?$a(t,e):he(r,n,Oa|Pa)}}function Ea(e){return function(r){return r==null?void 0:r[e]}}function Ca(e){return function(r){return Qe(r,e)}}function Sa(e){return ge(e)?Ea(Q(e)):Ca(e)}function Ia(e){return typeof e=="function"?e:e==null?Cr:typeof e=="object"?P(e)?xa(e[0],e[1]):wa(e):Sa(e)}function Ra(e,r,t,n){for(var i=-1,a=e==null?0:e.length;++i<a;){var s=e[i];r(n,s,t(s),e)}return n}function Ma(e){return function(r,t,n){for(var i=-1,a=Object(r),s=n(r),l=s.length;l--;){var u=s[++i];if(t(a[u],u,a)===!1)break}return r}}var Da=Ma();function Fa(e,r){return e&&Da(e,r,pe)}function Na(e,r){return function(t,n){if(t==null)return t;if(!qe(t))return e(t,n);for(var i=t.length,a=-1,s=Object(t);++a<i&&n(s[a],a,s)!==!1;);return t}}var La=Na(Fa);function za(e,r,t,n){return La(e,function(i,a,s){r(n,i,t(i),s)}),n}function ja(e,r){return function(t,n){var i=P(t)?Ra:za,a={};return i(t,e,Ia(n),a)}}var Ba=Object.prototype,Ga=Ba.hasOwnProperty,Ha=ja(function(e,r,t){Ga.call(e,t)?e[t].push(r):Zr(e,t,[r])});const Ua={class:"space-y-p"},qa={class:"text-foreground font-semibold"},Ka={class:"flex items-center gap-x-2 relative"},Ya={class:"w-[220px] overflow-hidden text-ellipsis"},Xa={class:"w-[50x]"},Za={class:"absolute h-0 overflow-hidden"},Ja=ue({__name:"order-history-table-row",props:{order:{}},emits:["reload"],setup(e,{emit:r}){const t=e,n=j(!1),i=async o=>{await navigator.clipboard.writeText(o),n.value=!0,await Ar(1200),n.value=!1},{$repo:{event:a,payment:s}}=ur(),l=j(),u=te(()=>({title:t.order.title,address:t.order.address,start_date:t.order.start_date})),f=j(!1),v=o=>{var _,$,T;mr(o,`spin-request-receipt-${((_=t.order)==null?void 0:_.title)??((T=($=l.value)==null?void 0:$.host)==null?void 0:T.stage_name)??""}`)},{converting:h,convertNodeToImage:g}=vr(`#RECEIPT_PRINT-${t.order.id}`,v,[]),w=async()=>{var o;try{if(l.value){g();return}f.value=!0;const _=await a.fetchRequestDetails(t.order.parent_id);f.value=!1,_.data&&(l.value=_.data,cr(()=>{g()}))}catch(_){f.value=!1;const T=((o=_.data)==null?void 0:o.message)??"Failed to download receipt";ve({title:T,variant:"warning"})}},m=r,y=j(!1),A=async()=>{var o;try{y.value=!0,await s.verifyPayment(t.order.reference),y.value=!1,m("reload")}catch(_){y.value=!1,ve({title:((o=_.data)==null?void 0:o.message)??"Verification failed",variant:"warning"})}};return(o,_)=>{const $=ir,T=sr,M=pr,ye=yr;return O(),fe("tr",{class:"!h-20 text-muted-foreground",key:o.order.id},[d("td",null,[d("div",{class:K(("cn"in o?o.cn:p(V))(" size-10 rounded-full grid place-items-center",o.order.status==="refunded"?"bg-[#38F08D]/15":"bg-[#F04438]/15"))},[b($,{name:o.order.status==="refunded"?"dotted-arrow-down":"dotted-arrow-up"},null,8,["name"])],2)]),d("td",null,[d("div",Ua,[d("div",qa,S(o.order.status==="refunded"?"-":"")+" ₦"+S(("formatMoney"in o?o.formatMoney:p(fr))(o.order.amount??0)),1),d("div",{class:K(("cn"in o?o.cn:p(V))("flex items-center gap-x-px  text-xs",o.order.type==="hype"?"text-[#FF99F1]":"text-[#FFEE99]"))},[b($,{name:o.order.type==="hype"?"mic":"music",class:"scale-50 -ml-1.5"},null,8,["name"]),d("div",null,S(o.order.type==="hype"?"Hype":"Song")+" request",1)],2)])]),d("td",null,S(o.order.dj),1),d("td",null,S(o.order.payment_gateway),1),d("td",null,S(o.order.date),1),d("td",{onClick:_[0]||(_[0]=ti=>i(o.order.reference))},[d("div",Ka,[d("div",{class:K(("cn"in o?o.cn:p(V))("bg-background/30 border py-2 px-4 opacity-0 transition-all -z-10 rounded-3xl text-sm text-center absolute place-center text-foreground",p(n)&&"top-0 -translate-y-full z-10 opacity-100"))}," Copied ",2),d("div",Ya,S(o.order.reference),1),b(p(Tr),{class:"size-4"})])]),d("td",{class:K({"text-[#38F08D]":o.order.status==="success","text-[#6DC9FC]":o.order.status==="refunded","text-[#E66840]":o.order.status==="failed"})},S(o.order.status),3),d("td",Xa,[b(T,null,{default:D(()=>[(O(),F(lr,{to:"#teleports"},[d("div",Za,[b(br,{request:p(l),event:p(u),id:`RECEIPT_PRINT-${o.order.id}`,print:"",class:"max-w-[550px]"},null,8,["request","event","id"])])]))]),_:1}),o.order.status==="pending"?(O(),F(ye,{key:0,message:"Re-validate payment"},{default:D(()=>[b(M,{size:"icon",variant:"outline",class:"relative",loading:p(f)||p(y),onClick:A},{default:D(()=>[p(y)?(O(),F(p(dr),{key:0,class:"size-4 animate-spin"})):(O(),F(p(Pr),{key:1,class:"size-4"}))]),_:1},8,["loading"])]),_:1})):(O(),F(ye,{key:1,message:"Download Receipt"},{default:D(()=>[b(M,{size:"icon",variant:"outline",class:"relative",loading:p(f)||p(h),onClick:w},{default:D(()=>[b(p(wr),{class:"size-4"})]),_:1},8,["loading"])]),_:1}))])])}}}),Wa={class:"min-h-[297px] grid place-items-center"},Qa={class:"space-y-4"},Va=ue({__name:"order-history-table",setup(e){const r=j(["","TRANSACTION","HOST","PAYMENT METHOD","DATE","TRANSACTION ID","STATUS",""]),{data:t,status:n,refresh:i}=$r("/transactions"),a=te(()=>{var u;const l=((u=t.value)==null?void 0:u.data)??[];return Ha(l,"parent_id")}),s=te(()=>Object.values(a.value).reverse().map(l=>l.reduce((u,f)=>u.amount?(u.amount=Number(u.amount)+Number(f.amount),u.reference=`${u.reference}-${f.reference}`,u.payment_gateway=`${u.payment_gateway} + ${f.payment_gateway}`,u):(Object.assign(u,f),u),{})));return(l,u)=>(O(),F(nr,{heading:p(r),data:p(s),loading:p(n)==="pending"},{empty:D(()=>[d("div",Wa,[d("div",Qa,[b(p(ar),{class:"size-8 block mx-auto"}),u[0]||(u[0]=d("div",{class:"text-2xl font-semibold text-muted-foreground text-center"}," No Song or Hype Requests Yet ",-1)),u[1]||(u[1]=d("div",{class:"text-sm text-muted-foreground text-center"}," You haven’t requested a song or hype from the DJ. Once you do, your requests will appear here ",-1))])])]),default:D(()=>[(O(!0),fe(_r,null,gr(p(s),(f,v)=>(O(),F(Ja,{key:f.id+f.parent_id+f.date+v,order:f,onReload:p(i)},null,8,["order","onReload"]))),128))]),_:1},8,["heading","data","loading"]))}}),ka={class:"container py-20"},ei={class:"flex gap-x-2 items-center fixed top-24"},ri={class:"bg-white/5 border rounded-3xl p-6 mt-8"},Ti=ue({__name:"order-history",setup(e){return hr({title:"Order History"}),(r,t)=>{const n=rr;return O(),fe("div",ka,[d("div",ei,[b(n,{to:"/audience"}),t[0]||(t[0]=d("div",{class:"text-2xl font-medium font-display"},"Order History",-1))]),b(tr,{"hide-caret":""}),d("div",ri,[t[1]||(t[1]=d("div",{class:"text-2xl font-semibold mb-6"},"History",-1)),b(Va)])])}}});export{Ti as default};
