import{_ as K}from"./DVx_XNg2.js";import{_ as U}from"./Cpev-P7o.js";import{h as k,o as i,p as _,w as m,a as c,n as e,b as s,c as R,t as y,v as q,i as I,j as w,d as z,z as F,_ as A,k as Y,l as Z,r as J,m as P,F as C,E as Q,K as W,Y as X,Z as ee}from"./C9o7SX3v.js";import{_ as te}from"./DAO5HDyR.js";import{a as G,_ as E,F as H}from"./BMpKgzc5.js";import{_ as ae}from"./BFzXrHka.js";import{c as ne,b as se,a as g}from"./PSdzrU7u.js";import{u as O}from"./CTEWGeNP.js";import{u as oe}from"./CorZQDxr.js";import"./CEjNp6Up.js";import"./Cpj98o6Y.js";const re=["name","value"],S=k({__name:"form-hidden-input",props:{name:{}},setup(h){return(a,l)=>(i(),_(e(G),{name:a.name,class:"relative h-0 invisible",as:"div"},{default:m(({value:o})=>[c("input",{type:"hidden",name:a.name,value:o},null,8,re)]),_:1},8,["name"]))}}),ie={key:0,class:"text-sm text-destructive animate-in slide-in-from-top-1 absolute -bottom-5 font-semibold"},le=k({__name:"form-textarea",props:{name:{},label:{},type:{},id:{},placeholder:{},disabled:{type:Boolean},showErrorOnTouch:{type:Boolean,default:!1}},setup(h){return(a,l)=>(i(),_(e(G),{name:a.name,class:"relative",as:"div"},{default:m(({value:o,handleChange:u,errorMessage:d,meta:p})=>[s(ae,{"model-value":o,onChange:u,name:a.name,type:a.type,disabled:a.disabled,placeholder:a.placeholder,id:a.id,label:a.label,state:d&&p.touched?"error":"normal"},null,8,["model-value","onChange","name","type","disabled","placeholder","id","label","state"]),p.touched||a.showErrorOnTouch?(i(),R("div",ie,y(d),1)):q("",!0)]),_:1},8,["name"]))}}),L=ne({type:se().oneOf(["hype","song"]).required(),event_id:g().required(),nickname:g().optional()}),ue=L.shape({description:g().required("Hype description required"),nickname:g().required("Nickname required")}),me=L.shape({artist:g().required("Artist name required"),song_title:g().required("Song name required")}),de=k({__name:"hype-request-form",props:{request:{},event_id:{},host_slug:{}},setup(h){const a=h,{auth_user:l}=I(),o=w(()=>{var t;return{type:a.request.name,event_id:Number(a.event_id),nickname:(t=l.value)==null?void 0:t.user_name}}),{createEventRequest:u,creating:d}=O(),p=t=>{u(t,a.host_slug)};return(t,f)=>(i(),_(e(H),{"validation-schema":e(ue),"initial-values":e(o),onSubmit:p,class:"space-y-7"},{default:m(()=>[s(S,{name:"event_id"}),s(S,{name:"type"}),s(le,{name:"description",placeholder:"Enter hype description",label:"Tell us about your hype",type:"text"}),s(E,{name:"nickname",placeholder:"Enter your nickname",label:"nickname",disabled:!!e(o).nickname},null,8,["disabled"]),s(A,{type:"submit",size:"lg",class:"max-w-full w-[400px] mx-auto !flex uppercase",loading:e(d)},{default:m(()=>{var n;return[z(" Request Hype For "+y(Number((n=t.request)==null?void 0:n.price)>0?`₦${("formatMoney"in t?t.formatMoney:e(F))(t.request.price)}`:"FREE"),1)]}),_:1},8,["loading"])]),_:1},8,["validation-schema","initial-values"]))}}),pe=k({__name:"song-request-form",props:{request:{},event_id:{},host_slug:{}},setup(h){const a=h,{auth_user:l}=I(),o=w(()=>{var t;return{type:a.request.name,event_id:Number(a.event_id),nickname:(t=l.value)==null?void 0:t.user_name}}),{createEventRequest:u,creating:d}=O(),p=t=>{u(t,a.host_slug)};return(t,f)=>(i(),_(e(H),{"validation-schema":e(me),"initial-values":e(o),onSubmit:p,class:"space-y-7"},{default:m(()=>[s(S,{name:"event_id"}),s(S,{name:"type"}),s(E,{name:"song_title",placeholder:"Enter song title",label:"Song title",type:"text"}),s(E,{name:"artist",placeholder:"Enter artiste name",label:"Artiste",type:"text"}),s(E,{name:"nickname",placeholder:"Enter your nickname",label:"nickname (optional)",disabled:!!e(o).nickname},null,8,["disabled"]),s(A,{type:"submit",size:"lg",class:"max-w-full w-[400px] mx-auto !flex uppercase",loading:e(d)},{default:m(()=>{var n;return[z(" Request Song For "+y(Number((n=t.request)==null?void 0:n.price)>0?`₦${("formatMoney"in t?t.formatMoney:e(F))(t.request.price)}`:"FREE"),1)]}),_:1},8,["loading"])]),_:1},8,["validation-schema","initial-values"]))}}),ce={class:"container pt-6 pb-20"},_e={class:"max-w-[700px] w-full mx-auto"},fe={class:"flex items-center gap-x-1"},he={class:"text-4xl font-bold text-primary tabular-nums"},ve={class:"text-2xl font-medium my-4 mb-2 capitalize"},ye={class:"text-muted-foreground"},Be=k({__name:"make-a-request",setup(h){const a=Y(),l=a.params.host,o=a.params.event_id,{data:u,error:d,status:p}=oe(`/user/host/${l}`);Z(u,n=>{var r,v,x;((x=(v=(r=n==null?void 0:n.data)==null?void 0:r.live_event)==null?void 0:v.types)==null?void 0:x.length)===1&&(t.value=n.data.live_event.types[0].name)});const t=J(""),f=w(()=>{var n,r;return(r=(n=u.value)==null?void 0:n.data.live_event)==null?void 0:r.types.find(v=>v.name===t.value)});return P({title:"Make A Request"}),(n,r)=>{const v=K,x=U,j=X,D=ee;return i(),R("div",ce,[s(v,{to:`/${e(l)}`},null,8,["to"]),s(te,{loading:e(p)==="pending",error:e(d)},{default:m(()=>{var B,M,N;return[c("div",_e,[r[1]||(r[1]=c("div",{class:"text-primary text-center text-lg"},"Make a request",-1)),r[2]||(r[2]=c("div",{class:"text-3xl font-semibold text-center font-display mt-2 mb-4"}," Tell me about your request ",-1)),(N=(M=(B=e(u))==null?void 0:B.data)==null?void 0:M.live_event)!=null&&N.types?(i(),_(D,{key:0,class:"grid grid-cols-[repeat(auto-fit,_minmax(315px,_1fr))] gap-6 my-6",modelValue:e(t),"onUpdate:modelValue":r[0]||(r[0]=$=>W(t)?t.value=$:null)},{default:m(()=>{var $,V,T;return[(i(!0),R(C,null,Q((T=(V=($=e(u))==null?void 0:$.data)==null?void 0:V.live_event)==null?void 0:T.types,b=>(i(),_(j,{class:"p-6 w-full lg:p-8 mx-auto text-left ring ring-input bg-white/10 rounded-2xl transition-colors cursor-pointer data-[state='checked']:ring-primary hover:ring-primary/30",key:b.id,value:b.name},{default:m(()=>[c("div",fe,[s(x,{name:"money"}),c("div",he," ₦"+y(("formatMoney"in n?n.formatMoney:e(F))(b.price)),1)]),c("div",ve,y(b.name)+" request ",1),c("div",ye,y(b.name==="song"?"Request a song and i'll give you credit when it plays":"Steal the spotlight. Get a shout-out  for yourself or someone."),1)]),_:2},1032,["value"]))),128))]}),_:1},8,["modelValue"])):q("",!0),e(f)?(i(),R(C,{key:1},[e(f).name==="hype"?(i(),_(de,{key:0,request:e(f),event_id:e(o),host_slug:e(l)},null,8,["request","event_id","host_slug"])):q("",!0),e(f).name==="song"?(i(),_(pe,{key:1,request:e(f),event_id:e(o),host_slug:e(l)},null,8,["request","event_id","host_slug"])):q("",!0)],64)):q("",!0)])]}),_:1},8,["loading","error"])])}}});export{Be as default};
